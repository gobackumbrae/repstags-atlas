<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <!-- Disable page zoom, but we still implement camera zoom inside the canvas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>Repstags Atlas Viewer</title>
  <link rel="icon" href="data:,">
  <style>
    :root { color-scheme: dark; }
    html, body { margin:0; padding:0; height:100%; background:#0b0d10; overflow:hidden; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; }
    #c { position:fixed; inset:0; width:100vw; height:100vh; display:block; touch-action:none; } /* prevents browser gestures on canvas */
    #ui {
      position:fixed; left:0; right:0; top:0;
      padding: 10px 10px 8px;
      background: linear-gradient(to bottom, rgba(0,0,0,.78), rgba(0,0,0,.25), rgba(0,0,0,0));
      pointer-events:none;
    }
    .panel { pointer-events:auto; backdrop-filter: blur(6px); }
    .row { display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
    .btn {
      appearance:none; border:1px solid rgba(255,255,255,.15); background:rgba(255,255,255,.06);
      color:#fff; padding:8px 10px; border-radius:10px; font-size:13px;
    }
    .btn.on { border-color: rgba(255,255,255,.35); background: rgba(255,255,255,.14); }
    #search {
      flex: 1 1 220px;
      min-width: 160px;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.35);
      color: #fff;
      outline: none;
      font-size: 14px;
    }
    #chips {
      margin-top: 8px;
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      max-height: 32vh;
      overflow:auto;
      padding-bottom: 6px;
    }
    .chip {
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color:#fff;
      padding:7px 10px;
      border-radius: 999px;
      font-size: 13px;
      line-height: 1;
      user-select:none;
      flex: 1 1 auto;           /* fills row gaps like your “no-gap” trick */
      min-width: max-content;   /* but still fits text */
    }
    .chip.on { background: rgba(255,255,255,.16); border-color: rgba(255,255,255,.35); }
    #info {
      margin-top: 8px;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.35);
      font-size: 13px;
      color: rgba(255,255,255,.92);
      max-width: min(920px, 100%);
    }
    #info small { color: rgba(255,255,255,.65); }
  </style>

  <!-- Import map so addon modules can import "three" -->
  <script type="importmap">
  {
    "imports": {
      "three": "./vendor/three/build/three.module.js",
      "three/addons/": "./vendor/three/addons/"
    }
  }
  </script>
</head>
<body>
  <canvas id="c"></canvas>

  <div id="ui">
    <div class="panel">
      <div class="row">
        <button class="btn on" data-sys="bones">Bones</button>
        <button class="btn on" data-sys="muscles">Muscles</button>
        <button class="btn" data-sys="nerves">Nerves</button>
        <button class="btn" data-sys="vessels">Vessels</button>
        <button class="btn" data-sys="organs">Organs</button>
        <button class="btn" id="clearSel">Clear selection</button>
      </div>

      <div class="row" style="margin-top:8px;">
        <input id="search" placeholder="Search muscles (e.g., biceps, deltoid, gastrocnemius)..." />
        <button class="btn" id="clearSearch">Clear</button>
      </div>

      <div id="chips"></div>
      <div id="info"><small>Tip:</small> One finger = rotate, two fingers = pan, pinch = zoom (camera). Tap a part to select.</div>
    </div>
  </div>

  <script type="module" src="./viewer.js"></script>
</body>
</html>
